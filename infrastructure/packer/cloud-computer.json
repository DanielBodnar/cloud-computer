{
  "builders": [
    {
      "account_file": "{{ user `CLOUD_COMPUTER_CREDENTIALS` }}/cloud-provider.json",
      "disk_size": "100",
      "image_name": "cloud-computer",
      "instance_name": "cloud-computer-packer-{{ timestamp }}",
      "project_id": "{{ user `CLOUD_COMPUTER_CLOUD_PROVIDER_PROJECT` }}",
      "source_image_family": "ubuntu-minimal-1904",
      "ssh_username": "root",
      "type": "googlecompute",
      "zone": "australia-southeast1-a"
    }
  ],
  "provisioners": [
    {
      "inline": [
        "apt-get update -qq",
        "apt-get install -qq docker.io",
        "docker pull {{ user `CLOUD_COMPUTER_IMAGE` }} &",
        "docker pull cloudnativecomputer/alertmanager &",
        "docker pull cloudnativecomputer/blender &",
        "docker pull cloudnativecomputer/cloud-computer &",
        "docker pull cloudnativecomputer/darktable &",
        "docker pull cloudnativecomputer/gnumeric &",
        "docker pull cloudnativecomputer/grafana &",
        "docker pull cloudnativecomputer/kicad &",
        "docker pull cloudnativecomputer/krita &",
        "docker pull cloudnativecomputer/launcher &",
        "docker pull cloudnativecomputer/postman &",
        "docker pull cloudnativecomputer/prometheus &",
        "docker pull cloudnativecomputer/skype &",
        "docker pull cloudnativecomputer/slack &",
        "docker pull dorowu/ubuntu-desktop-lxde-vnc &",
        "docker pull dougw/novnc &",
        "docker pull gliderlabs/logspout &",
        "docker pull google/cadvisor &",
        "docker pull google/cloud-sdk &",
        "docker pull jaegertracing/all-in-one &",
        "docker pull prom/node-exporter &",
        "docker pull prom/pushgateway &",
        "docker pull traefik &",
        "docker pull wernight/docker-compose &",
        "wait"
      ],
      "type": "shell"
    }
  ],
  "variables": {
    "CLOUD_COMPUTER_CLOUD_PROVIDER_PROJECT": "{{ env `CLOUD_COMPUTER_CLOUD_PROVIDER_PROJECT` }}",
    "CLOUD_COMPUTER_CREDENTIALS": "{{ env `CLOUD_COMPUTER_CREDENTIALS` }}",
    "CLOUD_COMPUTER_IMAGE": "{{ env `CLOUD_COMPUTER_IMAGE` }}"
  }
}
