{
  "builders": [
    {
      "account_file": "{{ user `CLOUD_COMPUTER_CREDENTIALS` }}/cloud-provider.json",
      "image_name": "cloud-computer",
      "instance_name": "cloud-computer-packer-{{ timestamp }}",
      "project_id": "{{ user `CLOUD_COMPUTER_CLOUD_PROVIDER_PROJECT` }}",
      "source_image_family": "coreos-stable",
      "ssh_username": "core",
      "type": "googlecompute",
      "zone": "australia-southeast1-a"
    }
  ],
  "provisioners": [
    {
      "inline": [
        "docker pull {{ user `CLOUD_COMPUTER_IMAGE` }} &",
        "cloudnativecomputer/alertmanager &",
        "cloudnativecomputer/blender &",
        "cloudnativecomputer/cloud-computer &",
        "cloudnativecomputer/darktable &",
        "cloudnativecomputer/gnumeric &",
        "cloudnativecomputer/grafana &",
        "cloudnativecomputer/kicad &",
        "cloudnativecomputer/krita &",
        "cloudnativecomputer/launcher &",
        "cloudnativecomputer/postman &",
        "cloudnativecomputer/prometheus &",
        "cloudnativecomputer/skype &",
        "cloudnativecomputer/slack &",
        "cloudnativecomputer/spotify &",
        "dorowu/ubuntu-desktop-lxde-vnc &",
        "dougw/novnc &",
        "gliderlabs/logspout &",
        "google/cadvisor &",
        "google/cloud-sdk &",
        "jaegertracing/all-in-one &",
        "prom/node-exporter &",
        "prom/pushgateway &",
        "traefik &",
        "ubuntu &",
        "wernight/docker-compose &",
        "wait"
      ],
      "type": "shell"
    }
  ],
  "variables": {
    "CLOUD_COMPUTER_CLOUD_PROVIDER_PROJECT": "{{ env `CLOUD_COMPUTER_CLOUD_PROVIDER_PROJECT` }}",
    "CLOUD_COMPUTER_CREDENTIALS": "{{ env `CLOUD_COMPUTER_CREDENTIALS` }}",
    "CLOUD_COMPUTER_IMAGE": "{{ env `CLOUD_COMPUTER_IMAGE` }}"
  }
}
